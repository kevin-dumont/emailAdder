!function(e){e.fn.emailAdder=function(){function a(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}if(e(this).addClass="emailAdder",defaultValues=e(this).attr("data-default"),e(this).after('<div class="emailAdderContainer"></div><style type="text/css">.emailAdder {font-family:Helvetica, Arial;color:#333;text-shadow: 0 1px 0 #fff;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;display: inline-block;font-size: 13px;border: 1px solid #E0E0E0;background-color: #F0F0F0;padding: 2px 5px 2px 5px; margin: 5px;}.crossEmailAdder {cursor:pointer;margin-left:8px;}</style>'),defaultValues){defaultValues=defaultValues.split(",");for(var t in defaultValues){var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i.test(a(defaultValues[t]))&&(email=a(defaultValues[t]),e(this).attr("value",""),e(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+e(this).attr("name")+'[]" value="'+email+'" /></div>'))}}return e(this).bind("keyup keydown paste",function(a){if("paste"==a.type){value=a.originalEvent.clipboardData.getData("Text");var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(t.test(value))return 0==e(this).next().find('input[value="'+value+'"]').length&&(e(this).attr("value",""),email=value,e(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+e(this).attr("name")+'[]" value="'+email+'" /></div>')),!1}else{if(value=e(this).val(),13==a.keyCode){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(value)?(0==e(this).next().find('input[value="'+value+'"]').length&&(e(this).attr("value",""),email=value,e(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+e(this).attr("name")+'[]" value="'+email+'" /></div>')),!1):!1}var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))[ \-\,\._]{1}$/;t.test(value)&&(email=value.substr(0,value.length-1),e(this).attr("value",""),0==e(this).next().find('input[type=hidden][value="'+email+'"]').length&&e(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+e(this).attr("name")+'[]" value="'+email+'" /></div>'))}}),e(".emailAdder .crossEmailAdder").live("click",function(){e(this).parent().remove()}),this},e.fn.emailAdderData=function(){return tab=[],e(this).next().find(".emailAdder input[type=hidden]").each(function(){tab.push(e(this).val())}),tab}}(jQuery);

(function(a){a.fn.emailAdder=function(){a(this).addClass="emailAdder";defaultValues=a(this).attr("data-default");a(this).after('<div class="emailAdderContainer"></div><style type="text/css">.emailAdder {font-family:Helvetica, Arial;color:#333;text-shadow: 0 1px 0 #fff;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;display: inline-block;font-size: 13px;border: 1px solid #E0E0E0;background-color: #F0F0F0;padding: 2px 5px 2px 5px; margin: 5px;}.crossEmailAdder {cursor:pointer;margin-left:8px;}</style>');if(defaultValues){defaultValues=defaultValues.split(",");for(var e in defaultValues){var f=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(f.test(d(defaultValues[e]))){email=d(defaultValues[e]);a(this).attr("value","");a(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+a(this).attr("name")+'[]" value="'+email+'" /></div>')}}}a(this).bind("keyup paste",function(c){if(c.type=="paste"){value=c.originalEvent.clipboardData.getData("Text");var g=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(g.test(value)){if(a(this).next().find('input[value="'+value+'"]').length==0){a(this).attr("value","");email=value;a(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+a(this).attr("name")+'[]" value="'+email+'" /></div>')}return false}}else{value=a(this).val();var g=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))[ \-\,\._]{1}$/;if(g.test(value)){email=value.substr(0,value.length-1);a(this).attr("value","");if(a(this).next().find('input[type=hidden][value="'+email+'"]').length==0){a(this).next().append('<div class="emailAdder">'+email+'<span class="crossEmailAdder">&times;</span><input type="hidden" name="'+a(this).attr("name")+'[]" value="'+email+'" /></div>')}}}});a(".emailAdder .crossEmailAdder").live("click",function(){a(this).parent().remove()});function d(b){return b.replace(/^\s+/g,"").replace(/\s+$/g,"")}return this};a.fn.emailAdderData=function(){tab=[];a(this).next().find(".emailAdder input[type=hidden]").each(function(){tab.push(a(this).val())});return tab}})(jQuery);